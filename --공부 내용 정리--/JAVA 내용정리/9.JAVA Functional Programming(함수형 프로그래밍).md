# JAVA_Functional Programming(í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°)

# **í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë€?**

í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤(Functional Interface)ëŠ” ë‹¨ í•˜ë‚˜ì˜ ì¶”ìƒ ë©”ì„œë“œë¥¼ ê°€ì§€ëŠ” ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤. `@FunctionalInterface` ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì„ì„ ëª…ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### C00INFO

```java
package Ch33;

public class C00INFO {
	//í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì´ë€ - ìœ íŠœë¸Œ
	// https://www.youtube.com/watch?v=jVG5jvOzu9Y
	
	//í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°
	//https://mangkyu.tistory.com/111
	
	//í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì˜ ê°–ì¶œìš”ì†Œ
	//https://warpgate3.tistory.com/entry/%EC%9E%90%EB%B0%94%EC%BD%94%EB%93%9C%EB%A1%9C-%EB%B3%B4%EB%8A%94-%ED%95%A8%EC%88%98%ED%98%95-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-Functional-Programming-in-Java
	
	
	//ëŒë‹¤&ìŠ¤íŠ¸ë¦¼ê³¼ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° : 
	//- https://wikidocs.net/157858
}
```

### C01FunctionalInterfaceMain

```java
package Ch33;

import java.util.Arrays;
import java.util.List;
import java.util.stream.Collectors;

@FunctionalInterface
interface Func1{  // í•¨ìˆ˜í˜•ì¸í„°í˜ì´ìŠ¤ ì„ ì–¸(Compilerì—ê²Œ ì „ë‹¬)
	void say(String message); //ì¶”ìƒ ë©”ì„œë“œ
	
	// í•¨ìˆ˜í˜•ì¸í„°í˜ì´ìŠ¤ì—ì„œëŠ” ë©”ì„œë“œëŠ” ë¬´ì¡°ê±´ í•˜ë‚˜ì—¬ì•¼ í•œë‹¤.
	
}

@FunctionalInterface
interface Func2{
	int sum(Integer ...args);
}

@FunctionalInterface
interface Func3{
	List<Integer> createListDesc(int ...args);
}

public class C01FunctionalInterfaceMain {

	public static void main(String[] args) {
		
		//01
		Func1 func1 = (message)->{System.out.println(message);};
		func1.say("HelloWorld");
		
		Func1 func1_1 = System.out::println;
		func1_1.say("HELLOWORLD");
		
		//02
		Func2 func2 = (items)->{
			// {}ì— ëª¨ë“  itemsë¥¼ ë”í•œê°’ì„ ë¦¬í„´
			int sum=0;
			for (Integer il : items) {
				sum+=il;
			}
			return sum;};  
		System.out.println(func2.sum(10,20,30,40,556,6,7,8,9));
		
		
		Func2 func2_2 = (items)->{
			// {}ì— ëª¨ë“  itemsë¥¼ ë”í•œê°’ì„ ë¦¬í„´(reduce)
			return Arrays.stream(items).reduce(0,(sum,el)->{return sum+=el;}); // 0ì€ sumì˜ ì´ˆê¸°ê°’
		};
		System.out.println(func2_2.sum(10,20,30,40,556,6,7,8,9));
		
		
		// ì›ì‹œíƒ€ì… int[] ë°›ê¸° -> intë¥¼ Integerë¡œ boxing -> ë‚´ë¦¼ì°¨ìˆœ -> List<Integerë³€í™˜>
		Func3 func3 = (items)->{
			return Arrays.stream(items).boxed().sorted((a,b)-> b-a).collect(Collectors.toList());
			
			};
			
		List<Integer> li = func3.createListDesc(10,100,24,1612,42,123,15,4,1);
		System.out.println(li);
	}
	
	// í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš©í•˜ë©´ ê°™ì€ í•¨ìˆ˜ì— ë‹¤ë¥¸ ë¡œì§ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.
}
```

<aside>
ğŸ’¡

í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ê°™ì€ í•¨ìˆ˜ì— ëŒ€í•´ ì„œë¡œ ë‹¤ë¥¸ ë¡œì§ì„ ì†ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
.boxed()
```

ğŸ‘‰ `int` â†’ `Integer` ë³€í™˜ (autoboxing)

ğŸ‘‰ `IntStream` â†’ `Stream<Integer>` ë³€í™˜

ğŸ‘‰ ëŒë‹¤ì‹ ì •ë ¬ì´ë‚˜ `collect()` ë“± ê°ì²´ ê¸°ë°˜ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ ê°€ëŠ¥í•´ì§

```java
return Arrays.stream(items).boxed().sorted((a,b)->b-a).reduce(0,(sum,el)->sum+=el);
```

`boxed()`ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë°”ë¡œ **`sorted((a, b) -> b - a)`ì™€ ê°™ì€ ì»¤ìŠ¤í…€ ì •ë ¬ì„ í•˜ê¸° ìœ„í•´ì„œì´ë‹¤.**

### `Arrays.stream(items)`

- ì´ê±´ `int[]` ë°°ì—´ì„ ë°›ì•„ì„œ `IntStream`ì„ ë§Œë“­ë‹ˆë‹¤.
- `IntStream`ì€ **ì›ì‹œ íƒ€ì… `int`** ì „ìš© ìŠ¤íŠ¸ë¦¼ì´ë¼ì„œ `sorted()`ëŠ” ì“¸ ìˆ˜ ìˆì§€ë§Œ **ì»¤ìŠ¤í…€ ì •ë ¬ ëŒë‹¤ì‹ì€ ëª» ì“´ë‹¤.**

### ê·¸ë˜ì„œ `.boxed()`ë¥¼ í•´ì£¼ëŠ” ì´ìœ ëŠ”?

- `IntStream` â†’ `Stream<Integer>`ë¡œ ë³€í™˜.
- ì´ì œ ì •ìˆ˜ ê°’ë“¤ì´ **ê°ì²´ íƒ€ì… `Integer`*ê°€ ë˜ì—ˆìœ¼ë¯€ë¡œ, ëŒë‹¤ì‹ì„ í™œìš©í•œ **ììœ ë¡œìš´ ì •ë ¬**ì´ ê°€ëŠ¥í•´ì§„ë‹¤.

### `reduce()`ëŠ” `IntStream`ì—ë„ ìˆê³ , `Stream<Integer>`ì—ë„ ìˆë‹¤.

- `IntStream`ì—ì„œì˜ reduce:
    
    ```java
    int result = IntStream.reduce(0, (sum, el) -> sum + el);
    ```
    
- `Stream<Integer>`ì—ì„œì˜ reduce:
    
    ```java
    int result = Stream<Integer>.reduce(0, (sum, el) -> sum + el);
    ```
    

ë‘˜ ë‹¤ ê°€ëŠ¥í•˜ì§€ë§Œ, **ì •ë ¬ì„ ì»¤ìŠ¤í…€ìœ¼ë¡œ í•˜ë ¤ë©´ `boxed()`ê°€ ê¼­ í•„ìš”**í•´ìš”.

</aside>

### C02Ex

```java
package Ch33;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

@FunctionalInterface
interface Functional{
	Integer execute(int ...args);	
}
class Calc{
	Functional sum;	//í•©
	Functional sub;	//ì°¨
	Functional mul;	//ê³±
	Functional div;	//ë‚˜ëˆ„ê¸°
	Calc(){
		//Functional sum ì— ëŒ€í•œ ìŠ¤íŠ¸ë¦¼ & ëŒë‹¤ì‹ ì™„ì„± í•  ê²ƒ
		//Functional sub ì— ëŒ€í•œ ìŠ¤íŠ¸ë¦¼ & ëŒë‹¤ì‹ ì™„ì„± í•  ê²ƒ
		//Functional mul ì— ëŒ€í•œ ìŠ¤íŠ¸ë¦¼ & ëŒë‹¤ì‹ ì™„ì„± í•  ê²ƒ
		//Functional div ì— ëŒ€í•œ ìŠ¤íŠ¸ë¦¼ & ëŒë‹¤ì‹ ì™„ì„± í•  ê²ƒ
		//ì¡°ê±´
		//sum,sub,mul,div ê°ê°ì— ëŒë‹¤&ìŠ¤íŠ¸ë¦¼í•¨ìˆ˜ë¥¼ ì ì ˆíˆ ì´ìš©í•´ì„œ ê¸°ëŠ¥ êµ¬í˜„ì„ í•©ë‹ˆë‹¤
		//ëª¨ë“  ì¸ìë¥¼ ë°›ì„ ìˆ˜ìˆëŠ” ê°€ë³€ì¸ì ì²˜ë¦¬ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤
		//ëº„ì…ˆ,ë‚˜ëˆ—ì…ˆì€ í°ìˆ˜ì—ì„œ ì‘ì€ìˆ˜ë¡œ ì •ë ¬(sorted)í•œë‹¤ìŒ ëˆ„ì  ê°ì‚° ì²˜ë¦¬(reduce)ë¥¼ í•©ë‹ˆë‹¤
		sum = (items)->{
			int total=0;
			for (int i : items) {
				total+=i;
			}
			return total;
		};
		
		sub = (items)->{
			return Arrays.stream(items).boxed().sorted((a,b)->b-a).reduce(0,(sum,el)-> Math.abs(el-sum));
		};
		mul = (items)->{
			int mul=1;
			for (int i : items) {
				mul*=i;
			}
			return mul;
			
		};
		
		div = (items)->{
			return Arrays.stream(items).boxed().sorted((a,b)->b-a).reduce(1,(div,el)->div/el);
			
		};
		
		
		}
}
public class C02Ex {

	public static void main(String[] args) {
		Calc calc = new Calc();
		System.out.println("í•© :"+ calc.sum.execute(10,20,30,40,50,60));
		System.out.println("ì°¨ :"+ calc.sub.execute(1,4,2,9));//1,2,4,5
		System.out.println("ê³± :"+ calc.mul.execute(10,20,30,40,50,60));
		System.out.println("ë‚˜ëˆ—ì…ˆ :"+ calc.div.execute(10,20,30,40,50,60));
		
	}	

}
```

### C03FunctionalInterfaceMain

```java
package Ch33;

import java.util.Arrays;
import java.util.List;
import java.util.function.Function;
import java.util.stream.Collectors;

//ì œê³µë˜ëŠ” í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë“¤
//Function<T, R>:
//apply ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆì–´ì„œ í•˜ë‚˜ì˜ ì¸ì(T)ë¥¼ ë°›ì•„ì„œ ê²°ê³¼(R)ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ ì…ë‹ˆë‹¤.

//Supplier<T>:
//get ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆì–´ì„œ ì–´ë– í•œ ì¸ìë„ ë°›ì§€ ì•Šê³  ê²°ê³¼ë§Œì„ ì œê³µí•˜ëŠ” í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ ì…ë‹ˆë‹¤.
//
//Consumer<T>:
//accept ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆì–´ì„œ ì–´ë– í•œ ì¸ìë¥¼ ë°›ì•„ì„œ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ ì…ë‹ˆë‹¤.
//
//Predicate<T>:
//test ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆì–´ì„œ ì–´ë– í•œ ì¸ìë¥¼ ë°›ì•„ì„œ ë¶ˆë¦¬ì–¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ ì…ë‹ˆë‹¤.
//
//UnaryOperator<T>:
//apply ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆì–´ì„œ í•˜ë‚˜ì˜ ì¸ìë¥¼ ë°›ì•„ì„œ ë™ì¼í•œ íƒ€ì…ì˜ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ ì…ë‹ˆë‹¤.
//
//BinaryOperator<T>:
//apply ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆì–´ì„œ ë‘ ê°œì˜ ì¸ìë¥¼ ë°›ì•„ì„œ ë™ì¼í•œ íƒ€ì…ì˜ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ ì…ë‹ˆë‹¤.

public class C03FunctionalInterfaceMain {
	
	// 01
	public static Function<Integer, Integer> func1 = (x)-> x*x;
	
	// 02
	public static Function<Integer, Integer> func2 = (x)-> x+x;
	// 03
	public static Function<List<Integer>, Integer> func3 = (list)->{
		
		return list.stream().reduce(0,(sum,el)->{return sum+el;}); 		
	};
	
	
	// 04
	public static Function<List<Object>, Integer> func4 = (list)->{
			// Integerí˜•ë§Œ í•„í„°ë§(instanceof)
			// ëˆ„ì í•© (reduce)
			int sum=0;
			for (Object ob : list) {
				if (ob instanceof Integer) {
					sum += (int)ob;
				}
			}
			return sum;
	};
	
	// 05
	public static Function<List<Object>, List<Integer>> func5 =(li)->{
		// List<Object>ë¡œ ë°›ì€ íŒŒë¼ë¯¸í„° ì¤‘ì— Integerë§Œ ì¶”ì¶œí•´ì„œ ë¦¬í„´í•˜ê¸°
		// 1. Integerí˜•ë§Œ í•„í„°ë§(instanceof)
		// 2. ì¬êµ¬ì„±(map)
		// 3. ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜(collect);
		
		List<Integer> tiiss = li.stream().filter(i -> i instanceof Integer).map(i->(Integer)i).collect(Collectors.toList());
		return tiiss;
	};
		
	
	// 06
	public static Function<Integer,Integer> func6 = func1.andThen(func2);
	// func1ì˜ ê²°ê³¼ë¥¼ func2ì˜ ì¸ìë¡œ ì§‘ì–´ë„£ëŠ”ë‹¤.
	
	// 07
	public static Function<Integer,Integer> func7 = func2.andThen(func1);
	
	// 08
	public static Function<List<Integer>,Integer> subFunc = (x)->{return x.stream().reduce(0,(sum,x1)->sum+x1);};
	public static Function<List<Object>, Integer> func8 = func5.andThen(subFunc);
	
	
	// 09
	public static Function <Integer, Function<Integer,Integer>> func9 = (x)->{return (x1)->{return x1+x1;};};
	
	// 10
	
	public static Function<Integer, Function<Integer,Integer>> func10 = x->y->x+y;
	
	// 11
	public static Function<Integer, Function<Integer,Function<Integer,Integer>>> func11 = null;
	
	// 12
	public static void main(String[] args) {
		
		
		// 01
		System.out.println(func1.apply(10));
		
		// 02
		System.out.println(func2.apply(10));
		
		// 03
		System.out.println(func3.apply(Arrays.asList(10,20,30,40)));
		
		// 04
		System.out.println(func4.apply(Arrays.asList("í™ê¸¸ë™",10,20,15,4,10.5,true,15)));
		
		// 05
		System.out.println(func5.apply(Arrays.asList("í™ê¸¸ë™",10,20,15,4,10.5,true,15)));
		
		// 06
		System.out.println(func6.apply(7));
		
		// 07
		System.out.println(func7.apply(5));
		
		// 08
		System.out.println(func8.apply(Arrays.asList("í™ê¸¸ë™",10,20,15,4,10.5,true,15)));
		
		// 09
		System.out.println(func9.apply(10).apply(20));
		
		
		// 11
		System.out.println(func11.apply(10).apply(20).apply(30));
	}
}
```

<aside>
ğŸ’¡

## `Function<A, B>`ë€?

`Function<T, R>`ì€ **ì…ë ¥ê°’ `T`ë¥¼ ë°›ì•„ì„œ ê²°ê³¼ê°’ `R`ì„ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤**ì˜ˆìš”.

ì´ê±¸ ì ìš©í•˜ë©´:

- `T`: ì…ë ¥ íƒ€ì… â†’ `List<Object>`
- `R`: ë°˜í™˜ íƒ€ì… â†’ `Integer`

```java
Function<List<Object>, Integer> func4 = (list) -> {
    // listëŠ” List<Object>
    **//** return íƒ€ì…ì€ Integer
};
```

- `list`ëŠ” **List<Object>** íƒ€ì…ìœ¼ë¡œ ì…ë ¥ì„ ë°›ëŠ” íŒŒë¼ë¯¸í„°ì´ê³ 
- ì „ì²´ ëŒë‹¤ëŠ” **Integerë¥¼ ë¦¬í„´**í•´ì•¼ í•´ìš”
</aside>

<aside>
ğŸ’¡

### â‘¤ë²ˆ êµ¬í˜„ (`for` ì—†ì´ `Stream`ìœ¼ë¡œë§Œ)

```java
// 05
public static Function<List<Object>, List<Integer>> func5 = (li) -> 
    li.stream()
      .filter(o -> o instanceof Integer)
      .map(o -> (Integer) o)
      .collect(Collectors.toList());
```

### ğŸ“Œ í•µì‹¬ ë©”ì„œë“œ ì„¤ëª…:

- `.stream()` â†’ ë¦¬ìŠ¤íŠ¸ë¥¼ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë³€í™˜
- `.filter(o -> o instanceof Integer)` â†’ `Integer` íƒ€ì…ë§Œ ë‚¨ê¹€
- `.map(o -> (Integer) o)` â†’ `Object`ë¥¼ `Integer`ë¡œ ìºìŠ¤íŒ…
- `.collect(Collectors.toList())` â†’ ê²°ê³¼ë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ë‹¤ì‹œ ìˆ˜ì§‘

### ì—¬ê¸°ì„œ ê¶ê¸ˆí•œ ì  : filterë¡œ Integeríƒ€ì„ë§Œ ë‚¨ê²¼ëŠ”ë° mapí• ë•Œ ì™œ ë˜ Integerë¡œ í˜•ë³€í™˜ì„ í•´ì¤˜ì•¼í•˜ëŠ”ê±´ê°€?

> ì´ìœ ëŠ” ì»´íŒŒì¼ëŸ¬ì˜ íƒ€ì… ì¸ì‹ ë•Œë¬¸ ì´ë‹¤.
> 

ìë°”ì˜ `Stream<Object>`ì—ì„œ `.filter()`ë¥¼ ê±°ì¹œë‹¤ê³  í•´ì„œ
ì»´íŒŒì¼ëŸ¬ëŠ” ê·¸ ì´í›„ì— íƒ€ì…ì´ ë°”ë€Œì—ˆë‹¤ê³  **ìë™ìœ¼ë¡œ ì¸ì‹í•˜ì§€ ì•ŠëŠ”ë‹¤.**

ì»´íŒŒì¼ëŸ¬ëŠ”:

> "ê·¸ë˜ë„ ë‚˜ëŠ” oë¥¼ ì—¬ì „íˆ Objectë¼ê³  ìƒê°í• ê²Œ.
> 
> 
> ë„ˆê°€ `Integer`ë¼ê³  í™•ì‹ í•œë‹¤ë©´ ì§ì ‘ ìºìŠ¤íŒ…í•´ì¤˜!"
> 

ê·¸ë˜ì„œ ìš°ë¦¬ê°€ **ì§ì ‘ `(Integer) o`ë¼ê³  ì•Œë ¤ì¤˜ì•¼ í•œë‹¤.**

</aside>
